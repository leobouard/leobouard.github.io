<script>
  function filterArticlesByTag(tag) {
    if (window.location.hash === `#${tag}`) {
      clearfilterArticlesByTag();
      return;
    }

    clearfilterArticlesByTag();
    document.querySelectorAll('article').forEach(article => {
      const tags = article.querySelector('.article-tags');
      if (!tags || !tags.textContent.includes(tag)) {
        article.classList.add('fade-out');
        setTimeout(() => {
          article.style.display = 'none';
        }, 500); // Correspond à la durée de la transition CSS
      } else {
        article.classList.add('fade-in');
        setTimeout(() => {
          article.classList.add('visible');
        }, 10); // Petit délai pour déclencher la transition
      }
    });
    highlightLinkByTag(tag);
  }

  function clearfilterArticlesByTag() {
    document.querySelectorAll('article').forEach(article => {
      article.classList.remove('fade-out', 'fade-in', 'visible');
      article.style.display = '';
    });

    history.replaceState(null, null, window.location.pathname);
  }
</script>